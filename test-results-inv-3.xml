<?xml version="1.0" encoding="UTF-8" ?>
<testsuites name="vitest tests" tests="12" failures="1" errors="0" time="0.0236229">
    <testsuite name="tests/unit/services/inventory-adjustments.service.test.ts" timestamp="2025-12-30T04:26:05.962Z" hostname="DESKTOP-HQV3RB6" tests="12" failures="1" errors="0" skipped="0" time="0.0236229">
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; create &gt; should create a draft adjustment successfully" time="0.0065227">
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; update &gt; should update a draft adjustment" time="0.0018163">
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; update &gt; should throw ValidationError if updating non-draft adjustment" time="0.0013361">
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; update &gt; should throw NotFoundError if adjustment does not exist" time="0.000511">
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; post &gt; should post an adjustment, update inventory records with system quantities, and update stock" time="0.002378">
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; post &gt; should throw error if posting non-draft adjustment" time="0.0036146">
            <system-err>
===== INVENTORY ADJUSTMENT POST ERROR =====
Adjustment ID: adj-1
User ID: user-123
Error: ValidationError: Adjustment has no items
    at new AppError (C:/Users/HI/Documents/GitHub/buenasv2/lib/errors.ts:57:11)
    at new ValidationError (C:/Users/HI/Documents/GitHub/buenasv2/lib/errors.ts:66:5)
    at __vite_ssr_import_0__.prisma.$transaction.maxWait (C:/Users/HI/Documents/GitHub/buenasv2/services/inventory-adjustment.service.ts:266:27)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m {
  statusCode: [33m400[39m,
  code: [32m&apos;VALIDATION_ERROR&apos;[39m,
  isOperational: [33mtrue[39m,
  details: [90mundefined[39m,
  fields: [90mundefined[39m
}
Stack: ValidationError: Adjustment has no items
    at new AppError (C:/Users/HI/Documents/GitHub/buenasv2/lib/errors.ts:57:11)
    at new ValidationError (C:/Users/HI/Documents/GitHub/buenasv2/lib/errors.ts:66:5)
    at __vite_ssr_import_0__.prisma.$transaction.maxWait (C:/Users/HI/Documents/GitHub/buenasv2/services/inventory-adjustment.service.ts:266:27)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
============================================

            </system-err>
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; findAll &gt; should return adjustments with filters" time="0.0006137">
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; findById &gt; should return adjustment if found" time="0.0003628">
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; findById &gt; should throw NotFoundError if not found" time="0.0005005">
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; copy &gt; should create a copy of an adjustment" time="0.0009695">
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; reverse &gt; should create a reversal adjustment and automatically post it" time="0.0022804">
            <system-err>
===== INVENTORY ADJUSTMENT POST ERROR =====
Adjustment ID: adj-reversal
User ID: user-123
Error: ValidationError: Adjustment has no items
    at new AppError (C:/Users/HI/Documents/GitHub/buenasv2/lib/errors.ts:57:11)
    at new ValidationError (C:/Users/HI/Documents/GitHub/buenasv2/lib/errors.ts:66:5)
    at __vite_ssr_import_0__.prisma.$transaction.maxWait (C:/Users/HI/Documents/GitHub/buenasv2/services/inventory-adjustment.service.ts:266:27)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m {
  statusCode: [33m400[39m,
  code: [32m&apos;VALIDATION_ERROR&apos;[39m,
  isOperational: [33mtrue[39m,
  details: [90mundefined[39m,
  fields: [90mundefined[39m
}
Stack: ValidationError: Adjustment has no items
    at new AppError (C:/Users/HI/Documents/GitHub/buenasv2/lib/errors.ts:57:11)
    at new ValidationError (C:/Users/HI/Documents/GitHub/buenasv2/lib/errors.ts:66:5)
    at __vite_ssr_import_0__.prisma.$transaction.maxWait (C:/Users/HI/Documents/GitHub/buenasv2/services/inventory-adjustment.service.ts:266:27)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
============================================

            </system-err>
            <failure message="Adjustment has no items" type="ValidationError">
ValidationError: Adjustment has no items
 ❯ new AppError lib/errors.ts:57:11
 ❯ new ValidationError lib/errors.ts:66:5
 ❯ prisma.$transaction.maxWait services/inventory-adjustment.service.ts:266:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { statusCode: 400, code: &apos;VALIDATION_ERROR&apos;, isOperational: true, details: undefined, fields: undefined }
            </failure>
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; reverse &gt; should throw error if reversing non-posted adjustment" time="0.0003977">
        </testcase>
    </testsuite>
</testsuites>
