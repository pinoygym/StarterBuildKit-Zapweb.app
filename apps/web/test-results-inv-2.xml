<?xml version="1.0" encoding="UTF-8" ?>
<testsuites name="vitest tests" tests="12" failures="3" errors="0" time="0.0188269">
    <testsuite name="tests/unit/services/inventory-adjustments.service.test.ts" timestamp="2025-12-30T04:25:15.894Z" hostname="DESKTOP-HQV3RB6" tests="12" failures="3" errors="0" skipped="0" time="0.0188269">
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; create &gt; should create a draft adjustment successfully" time="0.005576">
            <failure message="Cannot read properties of undefined (reading &apos;map&apos;)" type="TypeError">
TypeError: Cannot read properties of undefined (reading &apos;map&apos;)
 ❯ InventoryAdjustmentService.validateUOMs services/inventory-adjustment.service.ts:65:45
 ❯ InventoryAdjustmentService.create services/inventory-adjustment.service.ts:92:9
 ❯ tests/unit/services/inventory-adjustments.service.test.ts:101:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; update &gt; should update a draft adjustment" time="0.0027575">
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; update &gt; should throw ValidationError if updating non-draft adjustment" time="0.0010023">
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; update &gt; should throw NotFoundError if adjustment does not exist" time="0.0004507">
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; post &gt; should post an adjustment, update inventory records with system quantities, and update stock" time="0.0018924">
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; post &gt; should throw error if posting non-draft adjustment" time="0.0019583">
            <system-err>
===== INVENTORY ADJUSTMENT POST ERROR =====
Adjustment ID: adj-1
User ID: user-123
Error: ValidationError: Adjustment has no items
    at new AppError (C:/Users/HI/Documents/GitHub/buenasv2/lib/errors.ts:57:11)
    at new ValidationError (C:/Users/HI/Documents/GitHub/buenasv2/lib/errors.ts:66:5)
    at __vite_ssr_import_0__.prisma.$transaction.maxWait (C:/Users/HI/Documents/GitHub/buenasv2/services/inventory-adjustment.service.ts:266:27)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m {
  statusCode: [33m400[39m,
  code: [32m&apos;VALIDATION_ERROR&apos;[39m,
  isOperational: [33mtrue[39m,
  details: [90mundefined[39m,
  fields: [90mundefined[39m
}
Stack: ValidationError: Adjustment has no items
    at new AppError (C:/Users/HI/Documents/GitHub/buenasv2/lib/errors.ts:57:11)
    at new ValidationError (C:/Users/HI/Documents/GitHub/buenasv2/lib/errors.ts:66:5)
    at __vite_ssr_import_0__.prisma.$transaction.maxWait (C:/Users/HI/Documents/GitHub/buenasv2/services/inventory-adjustment.service.ts:266:27)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
============================================

            </system-err>
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; findAll &gt; should return adjustments with filters" time="0.0006513">
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; findById &gt; should return adjustment if found" time="0.0003818">
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; findById &gt; should throw NotFoundError if not found" time="0.0003527">
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; copy &gt; should create a copy of an adjustment" time="0.00092">
            <failure message="Cannot read properties of undefined (reading &apos;map&apos;)" type="TypeError">
TypeError: Cannot read properties of undefined (reading &apos;map&apos;)
 ❯ InventoryAdjustmentService.validateUOMs services/inventory-adjustment.service.ts:65:45
 ❯ InventoryAdjustmentService.create services/inventory-adjustment.service.ts:92:9
 ❯ InventoryAdjustmentService.copy services/inventory-adjustment.service.ts:527:22
 ❯ tests/unit/services/inventory-adjustments.service.test.ts:321:13
            </failure>
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; reverse &gt; should create a reversal adjustment and automatically post it" time="0.000689">
            <failure message="Cannot read properties of undefined (reading &apos;map&apos;)" type="TypeError">
TypeError: Cannot read properties of undefined (reading &apos;map&apos;)
 ❯ InventoryAdjustmentService.validateUOMs services/inventory-adjustment.service.ts:65:45
 ❯ InventoryAdjustmentService.create services/inventory-adjustment.service.ts:92:9
 ❯ InventoryAdjustmentService.reverse services/inventory-adjustment.service.ts:583:26
 ❯ tests/unit/services/inventory-adjustments.service.test.ts:372:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/services/inventory-adjustments.service.test.ts" name="InventoryAdjustmentService &gt; reverse &gt; should throw error if reversing non-posted adjustment" time="0.0003223">
        </testcase>
    </testsuite>
</testsuites>
