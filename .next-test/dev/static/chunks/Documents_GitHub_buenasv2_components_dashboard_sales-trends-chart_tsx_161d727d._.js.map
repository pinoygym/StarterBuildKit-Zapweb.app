{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HI/Documents/GitHub/buenasv2/components/dashboard/sales-trends-chart.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\r\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\n\r\ninterface SalesTrendsChartProps {\r\n  branchId?: string;\r\n  days?: number;\r\n}\r\n\r\ninterface TrendData {\r\n  date: string;\r\n  sales: number;\r\n  revenue: number;\r\n}\r\n\r\nexport function SalesTrendsChart({ branchId, days = 7 }: SalesTrendsChartProps) {\r\n  const [data, setData] = useState<TrendData[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const params = new URLSearchParams();\r\n        if (branchId) params.append('branchId', branchId);\r\n        params.append('days', days.toString());\r\n\r\n        const response = await fetch(`/api/dashboard/sales-trends?${params.toString()}`);\r\n        const result = await response.json();\r\n\r\n        if (result.success) {\r\n          setData(result.data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching sales trends:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [branchId, days]);\r\n\r\n  const formatCurrency = (value: number) => {\r\n    return new Intl.NumberFormat('en-PH', {\r\n      style: 'currency',\r\n      currency: 'PHP',\r\n      minimumFractionDigits: 0,\r\n    }).format(value);\r\n  };\r\n\r\n  return (\r\n    <Card className=\"col-span-4\">\r\n      <CardHeader>\r\n        <CardTitle>Sales Trends</CardTitle>\r\n        <CardDescription>Daily sales and revenue over the last {days} days</CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        {loading ? (\r\n          <Skeleton className=\"h-[300px] w-full\" />\r\n        ) : data.length === 0 ? (\r\n          <div className=\"flex items-center justify-center h-[300px] text-muted-foreground\">\r\n            No sales data available for the selected period\r\n          </div>\r\n        ) : (\r\n          <ResponsiveContainer width=\"100%\" height={300}>\r\n            <LineChart data={data}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" />\r\n              <XAxis\r\n                dataKey=\"date\"\r\n                tick={{ fontSize: 12 }}\r\n                angle={-45}\r\n                textAnchor=\"end\"\r\n                height={60}\r\n              />\r\n              <YAxis\r\n                yAxisId=\"left\"\r\n                tick={{ fontSize: 12 }}\r\n                label={{ value: 'Sales Count', angle: -90, position: 'insideLeft' }}\r\n              />\r\n              <YAxis\r\n                yAxisId=\"right\"\r\n                orientation=\"right\"\r\n                tick={{ fontSize: 12 }}\r\n                label={{ value: 'Revenue (PHP)', angle: 90, position: 'insideRight' }}\r\n              />\r\n              <Tooltip\r\n                formatter={(value: number, name: string) => {\r\n                  if (name === 'revenue') {\r\n                    return [formatCurrency(value), 'Revenue'];\r\n                  }\r\n                  return [value, 'Sales Count'];\r\n                }}\r\n              />\r\n              <Legend />\r\n              <Line\r\n                yAxisId=\"left\"\r\n                type=\"monotone\"\r\n                dataKey=\"sales\"\r\n                stroke=\"#8884d8\"\r\n                strokeWidth={2}\r\n                name=\"Sales Count\"\r\n                dot={{ r: 4 }}\r\n              />\r\n              <Line\r\n                yAxisId=\"right\"\r\n                type=\"monotone\"\r\n                dataKey=\"revenue\"\r\n                stroke=\"#82ca9d\"\r\n                strokeWidth={2}\r\n                name=\"Revenue\"\r\n                dot={{ r: 4 }}\r\n              />\r\n            </LineChart>\r\n          </ResponsiveContainer>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AALA;;;;;AAkBO,SAAS,iBAAiB,EAAE,QAAQ,EAAE,OAAO,CAAC,EAAyB;;IAC5E,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,4MAAQ,EAAc,EAAE;IAChD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,4MAAQ,EAAC;IAEvC,IAAA,6MAAS;sCAAC;YACR,MAAM;wDAAY;oBAChB,IAAI;wBACF,WAAW;wBACX,MAAM,SAAS,IAAI;wBACnB,IAAI,UAAU,OAAO,MAAM,CAAC,YAAY;wBACxC,OAAO,MAAM,CAAC,QAAQ,KAAK,QAAQ;wBAEnC,MAAM,WAAW,MAAM,MAAM,CAAC,4BAA4B,EAAE,OAAO,QAAQ,IAAI;wBAC/E,MAAM,SAAS,MAAM,SAAS,IAAI;wBAElC,IAAI,OAAO,OAAO,EAAE;4BAClB,QAAQ,OAAO,IAAI;wBACrB;oBACF,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,gCAAgC;oBAChD,SAAU;wBACR,WAAW;oBACb;gBACF;;YAEA;QACF;qCAAG;QAAC;QAAU;KAAK;IAEnB,MAAM,iBAAiB,CAAC;QACtB,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;YACpC,OAAO;YACP,UAAU;YACV,uBAAuB;QACzB,GAAG,MAAM,CAAC;IACZ;IAEA,qBACE,gOAAC,uKAAI;QAAC,WAAU;;0BACd,gOAAC,6KAAU;;kCACT,gOAAC,4KAAS;kCAAC;;;;;;kCACX,gOAAC,kLAAe;;4BAAC;4BAAuC;4BAAK;;;;;;;;;;;;;0BAE/D,gOAAC,8KAAW;0BACT,wBACC,gOAAC,+KAAQ;oBAAC,WAAU;;;;;2BAClB,KAAK,MAAM,KAAK,kBAClB,gOAAC;oBAAI,WAAU;8BAAmE;;;;;yCAIlF,gOAAC,gOAAmB;oBAAC,OAAM;oBAAO,QAAQ;8BACxC,cAAA,gOAAC,wMAAS;wBAAC,MAAM;;0CACf,gOAAC,oNAAa;gCAAC,iBAAgB;;;;;;0CAC/B,gOAAC,oMAAK;gCACJ,SAAQ;gCACR,MAAM;oCAAE,UAAU;gCAAG;gCACrB,OAAO,CAAC;gCACR,YAAW;gCACX,QAAQ;;;;;;0CAEV,gOAAC,oMAAK;gCACJ,SAAQ;gCACR,MAAM;oCAAE,UAAU;gCAAG;gCACrB,OAAO;oCAAE,OAAO;oCAAe,OAAO,CAAC;oCAAI,UAAU;gCAAa;;;;;;0CAEpE,gOAAC,oMAAK;gCACJ,SAAQ;gCACR,aAAY;gCACZ,MAAM;oCAAE,UAAU;gCAAG;gCACrB,OAAO;oCAAE,OAAO;oCAAiB,OAAO;oCAAI,UAAU;gCAAc;;;;;;0CAEtE,gOAAC,wMAAO;gCACN,WAAW,CAAC,OAAe;oCACzB,IAAI,SAAS,WAAW;wCACtB,OAAO;4CAAC,eAAe;4CAAQ;yCAAU;oCAC3C;oCACA,OAAO;wCAAC;wCAAO;qCAAc;gCAC/B;;;;;;0CAEF,gOAAC,sMAAM;;;;;0CACP,gOAAC,kMAAI;gCACH,SAAQ;gCACR,MAAK;gCACL,SAAQ;gCACR,QAAO;gCACP,aAAa;gCACb,MAAK;gCACL,KAAK;oCAAE,GAAG;gCAAE;;;;;;0CAEd,gOAAC,kMAAI;gCACH,SAAQ;gCACR,MAAK;gCACL,SAAQ;gCACR,QAAO;gCACP,aAAa;gCACb,MAAK;gCACL,KAAK;oCAAE,GAAG;gCAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ5B;GAxGgB;KAAA"}}]
}