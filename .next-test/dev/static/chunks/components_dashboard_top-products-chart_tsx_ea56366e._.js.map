{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Users/HI/Documents/GitHub/testTemplateGithub/components/dashboard/top-products-chart.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\n\r\ninterface TopProductsChartProps {\r\n  branchId?: string;\r\n  limit?: number;\r\n}\r\n\r\ninterface ProductData {\r\n  productId: string;\r\n  productName: string;\r\n  quantitySold: number;\r\n  revenue: string;\r\n}\r\n\r\nexport function TopProductsChart({ branchId, limit = 5 }: TopProductsChartProps) {\r\n  const [data, setData] = useState<ProductData[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const params = new URLSearchParams();\r\n        if (branchId) params.append('branchId', branchId);\r\n        params.append('limit', limit.toString());\r\n\r\n        const response = await fetch(`/api/dashboard/top-products?${params.toString()}`);\r\n        const result = await response.json();\r\n\r\n        if (result.success) {\r\n          setData(result.data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching top products:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [branchId, limit]);\r\n\r\n  const formatCurrency = (value: number) => {\r\n    return new Intl.NumberFormat('en-PH', {\r\n      style: 'currency',\r\n      currency: 'PHP',\r\n      minimumFractionDigits: 0,\r\n    }).format(value);\r\n  };\r\n\r\n  return (\r\n    <Card className=\"col-span-4\">\r\n      <CardHeader>\r\n        <CardTitle>Top Selling Products</CardTitle>\r\n        <CardDescription>Best performing products by revenue</CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        {loading ? (\r\n          <Skeleton className=\"h-[300px] w-full\" />\r\n        ) : data.length === 0 ? (\r\n          <div className=\"flex items-center justify-center h-[300px] text-muted-foreground\">\r\n            No product sales data available\r\n          </div>\r\n        ) : (\r\n          <ResponsiveContainer width=\"100%\" height={300}>\r\n            <BarChart data={data}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" />\r\n              <XAxis\r\n                dataKey=\"productName\"\r\n                tick={{ fontSize: 12 }}\r\n                angle={-45}\r\n                textAnchor=\"end\"\r\n                height={100}\r\n              />\r\n              <YAxis\r\n                tick={{ fontSize: 12 }}\r\n                label={{ value: 'Revenue (PHP)', angle: -90, position: 'insideLeft' }}\r\n              />\r\n              <Tooltip\r\n                formatter={(value: any) => formatCurrency(Number(value))}\r\n                labelFormatter={(label) => `Product: ${label}`}\r\n              />\r\n              <Legend />\r\n              <Bar\r\n                dataKey=\"revenue\"\r\n                fill=\"#8884d8\"\r\n                name=\"Revenue\"\r\n                radius={[8, 8, 0, 0]}\r\n              />\r\n            </BarChart>\r\n          </ResponsiveContainer>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AALA;;;;;AAmBO,SAAS,iBAAiB,EAAE,QAAQ,EAAE,QAAQ,CAAC,EAAyB;;IAC7E,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAgB,EAAE;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;sCAAC;YACR,MAAM;wDAAY;oBAChB,IAAI;wBACF,WAAW;wBACX,MAAM,SAAS,IAAI;wBACnB,IAAI,UAAU,OAAO,MAAM,CAAC,YAAY;wBACxC,OAAO,MAAM,CAAC,SAAS,MAAM,QAAQ;wBAErC,MAAM,WAAW,MAAM,MAAM,CAAC,4BAA4B,EAAE,OAAO,QAAQ,IAAI;wBAC/E,MAAM,SAAS,MAAM,SAAS,IAAI;wBAElC,IAAI,OAAO,OAAO,EAAE;4BAClB,QAAQ,OAAO,IAAI;wBACrB;oBACF,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,gCAAgC;oBAChD,SAAU;wBACR,WAAW;oBACb;gBACF;;YAEA;QACF;qCAAG;QAAC;QAAU;KAAM;IAEpB,MAAM,iBAAiB,CAAC;QACtB,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;YACpC,OAAO;YACP,UAAU;YACV,uBAAuB;QACzB,GAAG,MAAM,CAAC;IACZ;IAEA,qBACE,6LAAC,oIAAI;QAAC,WAAU;;0BACd,6LAAC,0IAAU;;kCACT,6LAAC,yIAAS;kCAAC;;;;;;kCACX,6LAAC,+IAAe;kCAAC;;;;;;;;;;;;0BAEnB,6LAAC,2IAAW;0BACT,wBACC,6LAAC,4IAAQ;oBAAC,WAAU;;;;;2BAClB,KAAK,MAAM,KAAK,kBAClB,6LAAC;oBAAI,WAAU;8BAAmE;;;;;yCAIlF,6LAAC,6LAAmB;oBAAC,OAAM;oBAAO,QAAQ;8BACxC,cAAA,6LAAC,mKAAQ;wBAAC,MAAM;;0CACd,6LAAC,iLAAa;gCAAC,iBAAgB;;;;;;0CAC/B,6LAAC,iKAAK;gCACJ,SAAQ;gCACR,MAAM;oCAAE,UAAU;gCAAG;gCACrB,OAAO,CAAC;gCACR,YAAW;gCACX,QAAQ;;;;;;0CAEV,6LAAC,iKAAK;gCACJ,MAAM;oCAAE,UAAU;gCAAG;gCACrB,OAAO;oCAAE,OAAO;oCAAiB,OAAO,CAAC;oCAAI,UAAU;gCAAa;;;;;;0CAEtE,6LAAC,qKAAO;gCACN,WAAW,CAAC,QAAe,eAAe,OAAO;gCACjD,gBAAgB,CAAC,QAAU,CAAC,SAAS,EAAE,OAAO;;;;;;0CAEhD,6LAAC,mKAAM;;;;;0CACP,6LAAC,6JAAG;gCACF,SAAQ;gCACR,MAAK;gCACL,MAAK;gCACL,QAAQ;oCAAC;oCAAG;oCAAG;oCAAG;iCAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQpC;GAjFgB;KAAA"}}]
}