{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HI/Documents/GitHub/buenasv2/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\r\n        outline:\r\n          \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2\",\r\n        sm: \"h-8 rounded-md px-3 text-xs\",\r\n        lg: \"h-10 rounded-md px-8\",\r\n        icon: \"h-9 w-9\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,0MAAG,EACxB,ySACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,sPAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,2MAAI,GAAG;IAC9B,qBACE,iRAAC;QACC,WAAW,IAAA,qJAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HI/Documents/GitHub/buenasv2/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Separator = React.forwardRef<\r\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\r\n>(\r\n  (\r\n    { className, orientation = \"horizontal\", decorative = true, ...props },\r\n    ref\r\n  ) => (\r\n    <SeparatorPrimitive.Root\r\n      ref={ref}\r\n      decorative={decorative}\r\n      orientation={orientation}\r\n      className={cn(\r\n        \"shrink-0 bg-border\",\r\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n)\r\nSeparator.displayName = SeparatorPrimitive.Root.displayName\r\n\r\nexport { Separator }\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,0BAAY,sPAAgB,CAIhC,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,iRAAC,gNAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,IAAA,qJAAE,EACX,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;AAIf,UAAU,WAAW,GAAG,gNAAuB,CAAC,WAAW"}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HI/Documents/GitHub/buenasv2/components/ui/theme-toggle.tsx"],"sourcesContent":["import { Moon, Sun } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { useThemeStore } from '@/lib/theme-store';\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport function ThemeToggle() {\r\n  const { theme, toggleTheme } = useThemeStore();\r\n  const [mounted, setMounted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n  }, []);\r\n\r\n  if (!mounted) {\r\n    return (\r\n      <Button variant=\"ghost\" size=\"icon\" aria-label=\"Toggle theme\">\r\n        <Sun className=\"h-5 w-5 opacity-0\" />\r\n      </Button>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Button\r\n      variant=\"ghost\"\r\n      size=\"icon\"\r\n      onClick={toggleTheme}\r\n      aria-label={`Switch to ${theme === 'light' ? 'dark' : 'light'} mode`}\r\n    >\r\n      {theme === 'light' ? (\r\n        <Moon className=\"h-5 w-5\" />\r\n      ) : (\r\n        <Sun className=\"h-5 w-5\" />\r\n      )}\r\n    </Button>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;AACA;AACA;;;;;;AAEO,SAAS;IACd,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,GAAG,IAAA,yKAAa;IAC5C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,oPAAQ,EAAC;IAEvC,IAAA,qPAAS,EAAC;QACR,WAAW;IACb,GAAG,EAAE;IAEL,IAAI,CAAC,SAAS;QACZ,qBACE,iRAAC,wKAAM;YAAC,SAAQ;YAAQ,MAAK;YAAO,cAAW;sBAC7C,cAAA,iRAAC,0OAAG;gBAAC,WAAU;;;;;;;;;;;IAGrB;IAEA,qBACE,iRAAC,wKAAM;QACL,SAAQ;QACR,MAAK;QACL,SAAS;QACT,cAAY,CAAC,UAAU,EAAE,UAAU,UAAU,SAAS,QAAQ,KAAK,CAAC;kBAEnE,UAAU,wBACT,iRAAC,6OAAI;YAAC,WAAU;;;;;iCAEhB,iRAAC,0OAAG;YAAC,WAAU;;;;;;;;;;;AAIvB"}},
    {"offset": {"line": 161, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HI/Documents/GitHub/buenasv2/hooks/use-company-settings.ts"],"sourcesContent":["import { useQuery } from '@tanstack/react-query';\r\n\r\ninterface CompanySettings {\r\n    id: string;\r\n    companyName: string;\r\n    address: string;\r\n    vatEnabled: boolean;\r\n    vatRate: number;\r\n    vatRegistrationNumber: string;\r\n    taxInclusive: boolean;\r\n    maxDiscountPercentage: number;\r\n    requireDiscountApproval: boolean;\r\n    discountApprovalThreshold: number;\r\n    approvalRules: string;\r\n}\r\n\r\n/**\r\n * Custom hook to fetch and cache company settings\r\n * @returns Company settings data with loading and error states\r\n */\r\nexport function useCompanySettings() {\r\n    return useQuery<CompanySettings>({\r\n        queryKey: ['company-settings'],\r\n        queryFn: async () => {\r\n            const response = await fetch('/api/settings/company');\r\n            const data = await response.json();\r\n\r\n            if (!data.success) {\r\n                throw new Error(data.error || 'Failed to fetch company settings');\r\n            }\r\n\r\n            return data.data;\r\n        },\r\n        staleTime: 5 * 60 * 1000, // 5 minutes\r\n        gcTime: 10 * 60 * 1000, // 10 minutes (formerly cacheTime)\r\n        retry: 2,\r\n    });\r\n}\r\n\r\n/**\r\n * Helper hook to get just the company name with a fallback\r\n * @returns Company name string with fallback to \"InventoryPro\"\r\n */\r\nexport function useCompanyName() {\r\n    const { data, isLoading } = useCompanySettings();\r\n\r\n    return {\r\n        companyName: data?.companyName || 'InventoryPro',\r\n        isLoading,\r\n    };\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAoBO,SAAS;IACZ,OAAO,IAAA,0NAAQ,EAAkB;QAC7B,UAAU;YAAC;SAAmB;QAC9B,SAAS;YACL,MAAM,WAAW,MAAM,MAAM;YAC7B,MAAM,OAAO,MAAM,SAAS,IAAI;YAEhC,IAAI,CAAC,KAAK,OAAO,EAAE;gBACf,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;YAClC;YAEA,OAAO,KAAK,IAAI;QACpB;QACA,WAAW,IAAI,KAAK;QACpB,QAAQ,KAAK,KAAK;QAClB,OAAO;IACX;AACJ;AAMO,SAAS;IACZ,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG;IAE5B,OAAO;QACH,aAAa,MAAM,eAAe;QAClC;IACJ;AACJ"}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HI/Documents/GitHub/buenasv2/components/shared/sidebar.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { usePathname } from 'next/navigation';\r\nimport { cn } from '@/lib/utils';\r\nimport {\r\n  LayoutDashboard,\r\n  Package,\r\n  Warehouse,\r\n  Building2,\r\n  Users,\r\n  ShoppingCart,\r\n  FileText,\r\n  Store,\r\n  CreditCard,\r\n  Receipt,\r\n  AlertCircle,\r\n  BarChart3,\r\n  Menu,\r\n  X,\r\n  BoxIcon,\r\n  Shield,\r\n  UserCog,\r\n  LogOut,\r\n  Settings,\r\n  History,\r\n  Database,\r\n  PackageCheck,\r\n  ClipboardEdit,\r\n  Milestone,\r\n  Wallet,\r\n} from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport { ThemeToggle } from '@/components/ui/theme-toggle';\r\nimport { useState } from 'react';\r\nimport { useAuth } from '@/contexts/auth.context';\r\nimport { useCompanyName } from '@/hooks/use-company-settings';\r\n\r\nconst navigation = [\r\n  { name: 'Dashboard', href: '/dashboard', icon: LayoutDashboard },\r\n  { name: 'Products', href: '/products', icon: Package },\r\n  { name: 'Inventory', href: '/inventory', icon: BoxIcon },\r\n  { name: 'Adjustments', href: '/inventory/adjustments', icon: ClipboardEdit },\r\n  { name: 'Stock Transfers', href: '/inventory/transfers', icon: Milestone },\r\n  { name: 'Warehouses', href: '/warehouses', icon: Warehouse },\r\n  { name: 'Branches', href: '/branches', icon: Building2 },\r\n  { name: 'Customers', href: '/customers', icon: Users },\r\n  { name: 'Suppliers', href: '/suppliers', icon: Users },\r\n  { name: 'Purchase Orders', href: '/purchase-orders', icon: ShoppingCart },\r\n  { name: 'Receiving Vouchers', href: '/receiving-vouchers', icon: PackageCheck },\r\n  { name: 'Sales Orders', href: '/sales-orders', icon: FileText },\r\n  { name: 'POS', href: '/pos', icon: Store },\r\n  { name: 'Sales History', href: '/sales-history', icon: History },\r\n  { name: 'AR/AP', href: '/ar-ap', icon: CreditCard },\r\n  { name: 'Fund Sources', href: '/fund-sources', icon: Wallet },\r\n  { name: 'Expenses', href: '/expenses', icon: Receipt },\r\n  { name: 'Alerts', href: '/alerts', icon: AlertCircle },\r\n  { name: 'Reports', href: '/reports', icon: BarChart3 },\r\n  { name: 'Data Maintenance', href: '/data-maintenance', icon: Database },\r\n  { name: 'Roadmap', href: '/roadmap', icon: Milestone },\r\n];\r\n\r\nconst settingsNavigation = [\r\n  { name: 'Users', href: '/users', icon: UserCog },\r\n  { name: 'Roles', href: '/roles', icon: Shield },\r\n  { name: 'Audit Logs', href: '/settings/audit-logs', icon: History },\r\n  { name: 'Settings', href: '/settings', icon: Settings },\r\n];\r\n\r\n\r\nexport function Sidebar({ counts }: { counts?: Record<string, number> }) {\r\n  const pathname = usePathname();\r\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n  const { user, logout, isSuperMegaAdmin } = useAuth();\r\n  const { companyName } = useCompanyName();\r\n\r\n  const handleLogout = async () => {\r\n    await logout();\r\n  };\r\n\r\n  // Map navigation href to count key\r\n  const getCount = (href: string) => {\r\n    if (!counts) return undefined;\r\n\r\n    switch (href) {\r\n      case '/products': return counts.products;\r\n      case '/warehouses': return counts.warehouses;\r\n      case '/branches': return counts.branches;\r\n      case '/customers': return counts.customers;\r\n      case '/suppliers': return counts.suppliers;\r\n      case '/purchase-orders': return counts.purchaseOrders;\r\n      case '/receiving-vouchers': return counts.receivingVouchers;\r\n      case '/sales-orders': return counts.salesOrders;\r\n      case '/users': return counts.users;\r\n      default: return undefined;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Mobile menu button ... existing code ... */}\r\n      <div className=\"lg:hidden fixed top-0 left-0 right-0 z-50 bg-background border-b px-4 py-3 flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <div className=\"flex items-center justify-center w-8 h-8 rounded-lg bg-primary\">\r\n            <Package className=\"h-5 w-5 text-primary-foreground\" />\r\n          </div>\r\n          <span className=\"font-bold text-lg text-foreground\">{companyName}</span>\r\n        </div>\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"icon\"\r\n          onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\r\n          aria-label={isMobileMenuOpen ? 'Close menu' : 'Open menu'}\r\n        >\r\n          {isMobileMenuOpen ? (\r\n            <X className=\"h-6 w-6\" />\r\n          ) : (\r\n            <Menu className=\"h-6 w-6\" />\r\n          )}\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Mobile menu overlay */}\r\n      {isMobileMenuOpen && (\r\n        <div\r\n          className=\"lg:hidden fixed inset-0 bg-black/50 z-40\"\r\n          onClick={() => setIsMobileMenuOpen(false)}\r\n          aria-hidden=\"true\"\r\n        />\r\n      )}\r\n\r\n      {/* Sidebar */}\r\n      <aside\r\n        className={cn(\r\n          'fixed top-0 left-0 z-40 h-screen transition-transform duration-300',\r\n          'w-64 bg-background border-r flex flex-col',\r\n          'lg:translate-x-0',\r\n          isMobileMenuOpen ? 'translate-x-0' : '-translate-x-full'\r\n        )}\r\n      >\r\n        {/* Logo and Branding */}\r\n        <div className=\"h-16 flex items-center gap-3 px-6 border-b\">\r\n          <div className=\"flex items-center justify-center w-8 h-8 rounded-lg bg-primary flex-shrink-0\">\r\n            <Package className=\"h-5 w-5 text-primary-foreground\" />\r\n          </div>\r\n          <div className=\"flex flex-col min-w-0 flex-1\">\r\n            <span className=\"font-bold text-base text-foreground leading-tight line-clamp-2\">{companyName}</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Navigation */}\r\n        <nav className=\"flex-1 overflow-y-auto p-4 space-y-1\">\r\n          {navigation.map((item) => {\r\n            const isActive = pathname === item.href || pathname.startsWith(item.href + '/');\r\n            const Icon = item.icon;\r\n            const count = getCount(item.href);\r\n\r\n            return (\r\n              <Link\r\n                key={item.name}\r\n                href={item.href}\r\n                onClick={() => setIsMobileMenuOpen(false)}\r\n                className={cn(\r\n                  'flex items-center justify-between gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors',\r\n                  'min-h-[44px]', // Minimum touch target size for mobile\r\n                  isActive\r\n                    ? 'bg-primary text-primary-foreground shadow-sm'\r\n                    : 'text-muted-foreground hover:bg-muted hover:text-foreground'\r\n                )}\r\n                aria-current={isActive ? 'page' : undefined}\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Icon className=\"h-5 w-5 flex-shrink-0\" />\r\n                  <span className=\"truncate\">{item.name}</span>\r\n                </div>\r\n                {count !== undefined && count > 0 && (\r\n                  <span className={cn(\r\n                    \"text-xs px-2 py-0.5 rounded-full\",\r\n                    isActive\r\n                      ? \"bg-primary-foreground/20 text-primary-foreground\"\r\n                      : \"bg-muted-foreground/20 text-muted-foreground\"\r\n                  )}>\r\n                    {count}\r\n                  </span>\r\n                )}\r\n              </Link>\r\n            );\r\n          })}\r\n\r\n          <Separator className=\"my-3\" />\r\n          <div className=\"pt-2\">\r\n            <p className=\"px-3 text-xs font-semibold text-muted-foreground mb-2\">Settings</p>\r\n            {settingsNavigation\r\n              .filter(() => isSuperMegaAdmin())\r\n              .map((item) => {\r\n                const isActive = pathname === item.href || pathname.startsWith(item.href + '/');\r\n                const Icon = item.icon;\r\n\r\n                return (\r\n                  <Link\r\n                    key={item.name}\r\n                    href={item.href}\r\n                    onClick={() => setIsMobileMenuOpen(false)}\r\n                    className={cn(\r\n                      'flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors',\r\n                      'min-h-[44px]',\r\n                      isActive\r\n                        ? 'bg-primary text-primary-foreground shadow-sm'\r\n                        : 'text-muted-foreground hover:bg-muted hover:text-foreground'\r\n                    )}\r\n                    aria-current={isActive ? 'page' : undefined}\r\n                  >\r\n                    <Icon className=\"h-5 w-5 flex-shrink-0\" />\r\n                    <span className=\"truncate\">{item.name}</span>\r\n                  </Link>\r\n                );\r\n              })}\r\n          </div>\r\n        </nav>\r\n\r\n        {/* Footer */}\r\n        <div className=\"p-4 border-t space-y-3\">\r\n          {/* Theme Toggle */}\r\n          <div className=\"flex justify-center\">\r\n            <ThemeToggle />\r\n          </div>\r\n\r\n          {/* User Info */}\r\n          {user && (\r\n            <Link\r\n              href=\"/profile\"\r\n              onClick={() => setIsMobileMenuOpen(false)}\r\n              className=\"flex items-center gap-3 px-3 py-2 rounded-lg bg-muted hover:bg-muted/80 transition-colors cursor-pointer\"\r\n            >\r\n              <div className=\"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground font-semibold text-sm\">\r\n                {user.firstName.charAt(0)}{user.lastName.charAt(0)}\r\n              </div>\r\n              <div className=\"flex-1 min-w-0\">\r\n                <p className=\"text-sm font-medium truncate\">\r\n                  {user.firstName} {user.lastName}\r\n                </p>\r\n                <p className=\"text-xs text-muted-foreground truncate\">\r\n                  {user.email}\r\n                </p>\r\n              </div>\r\n            </Link>\r\n          )}\r\n\r\n          {/* Logout Button */}\r\n          <Button\r\n            variant=\"outline\"\r\n            className=\"w-full justify-start\"\r\n            onClick={handleLogout}\r\n          >\r\n            <LogOut className=\"mr-2 h-4 w-4\" />\r\n            Logout\r\n          </Button>\r\n\r\n          {/* App Version */}\r\n          <div className=\"text-xs text-muted-foreground text-center\">\r\n            <p>Â© 2024 {companyName}</p>\r\n            <p className=\"mt-1\">v1.0.0</p>\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 771, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HI/Documents/GitHub/buenasv2/components/ui/select.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from \"@radix-ui/react-icons\"\r\n\r\nconst Select = SelectPrimitive.Root\r\n\r\nconst SelectGroup = SelectPrimitive.Group\r\n\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDownIcon className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronUpIcon className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n))\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronDownIcon className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n))\r\nSelectScrollDownButton.displayName =\r\n  SelectPrimitive.ScrollDownButton.displayName\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => (\r\n  <SelectPrimitive.Portal>\r\n    <SelectPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\r\n        position === \"popper\" &&\r\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n        className\r\n      )}\r\n      position={position}\r\n      {...props}\r\n    >\r\n      <SelectScrollUpButton />\r\n      <SelectPrimitive.Viewport\r\n        className={cn(\r\n          \"p-1\",\r\n          position === \"popper\" &&\r\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\r\n        )}\r\n      >\r\n        {children}\r\n      </SelectPrimitive.Viewport>\r\n      <SelectScrollDownButton />\r\n    </SelectPrimitive.Content>\r\n  </SelectPrimitive.Portal>\r\n))\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <CheckIcon className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOA,MAAM,SAAS,6MAAoB;AAEnC,MAAM,cAAc,8MAAqB;AAEzC,MAAM,cAAc,8MAAqB;AAEzC,MAAM,8BAAgB,sPAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,iRAAC,gNAAuB;QACtB,KAAK;QACL,WAAW,IAAA,qJAAE,EACX,kUACA;QAED,GAAG,KAAK;;YAER;0BACD,iRAAC,6MAAoB;gBAAC,OAAO;0BAC3B,cAAA,iRAAC,sOAAe;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAIjC,cAAc,WAAW,GAAG,gNAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,sPAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,iRAAC,uNAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,qJAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,iRAAC,oOAAa;YAAC,WAAU;;;;;;;;;;;AAG7B,qBAAqB,WAAW,GAAG,uNAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,sPAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,iRAAC,yNAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,qJAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,iRAAC,sOAAe;YAAC,WAAU;;;;;;;;;;;AAG/B,uBAAuB,WAAW,GAChC,yNAAgC,CAAC,WAAW;AAE9C,MAAM,8BAAgB,sPAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,iRAAC,+MAAsB;kBACrB,cAAA,iRAAC,gNAAuB;YACtB,KAAK;YACL,WAAW,IAAA,qJAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,iRAAC;;;;;8BACD,iRAAC,iNAAwB;oBACvB,WAAW,IAAA,qJAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,iRAAC;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,gNAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,sPAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,iRAAC,8MAAqB;QACpB,KAAK;QACL,WAAW,IAAA,qJAAE,EAAC,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,8MAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,sPAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,iRAAC,6MAAoB;QACnB,KAAK;QACL,WAAW,IAAA,qJAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BAET,iRAAC;gBAAK,WAAU;0BACd,cAAA,iRAAC,sNAA6B;8BAC5B,cAAA,iRAAC,gOAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGzB,iRAAC,iNAAwB;0BAAE;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,6MAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,sPAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,iRAAC,kNAAyB;QACxB,KAAK;QACL,WAAW,IAAA,qJAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG,kNAAyB,CAAC,WAAW"}},
    {"offset": {"line": 969, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HI/Documents/GitHub/buenasv2/hooks/use-branch.ts"],"sourcesContent":["import { useBranchContext } from '@/contexts/branch-context';\r\n\r\nexport function useBranch() {\r\n  return useBranchContext();\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,SAAS;IACd,OAAO,IAAA,qLAAgB;AACzB"}},
    {"offset": {"line": 982, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HI/Documents/GitHub/buenasv2/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\r\n\r\nfunction Skeleton({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) {\r\n  return (\r\n    <div\r\n      className={cn(\"animate-pulse rounded-md bg-primary/10\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Skeleton }\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,iRAAC;QACC,WAAW,IAAA,qJAAE,EAAC,0CAA0C;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 1005, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HI/Documents/GitHub/buenasv2/components/shared/branch-selector.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { Building2, Check, ChevronDown, Lock } from 'lucide-react';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { useBranch } from '@/hooks/use-branch';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\n\r\nexport function BranchSelector() {\r\n  const { branches, selectedBranch, setSelectedBranch, isLoading, canChangeBranch } = useBranch();\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center gap-2\">\r\n        <Building2 className=\"h-4 w-4 text-muted-foreground\" />\r\n        <Skeleton className=\"h-9 w-[200px]\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!branches || branches.length === 0) {\r\n    return (\r\n      <div className=\"flex items-center gap-2 px-3 py-2 text-sm text-muted-foreground border rounded-lg bg-muted/50\">\r\n        <Building2 className=\"h-4 w-4\" />\r\n        <span>No branches available</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // If user cannot change branch (e.g., Cashier role), show locked state\r\n  if (canChangeBranch === false) {\r\n    return (\r\n      <div className=\"flex items-center gap-2 px-3 py-2 text-sm border rounded-lg bg-muted/50\">\r\n        <Building2 className=\"h-4 w-4 text-muted-foreground\" />\r\n        <span className=\"font-medium\">{selectedBranch?.name || 'Loading...'}</span>\r\n        {selectedBranch?.code && (\r\n          <span className=\"text-xs text-muted-foreground\">({selectedBranch.code})</span>\r\n        )}\r\n        <Lock className=\"h-3 w-3 ml-1 text-muted-foreground\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-2\">\r\n      <Building2 className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\r\n      <Select\r\n        value={selectedBranch?.id || 'all'}\r\n        onValueChange={(value) => {\r\n          if (value === 'all') {\r\n            setSelectedBranch(null);\r\n          } else {\r\n            const branch = branches.find((b) => b.id === value);\r\n            if (branch) setSelectedBranch(branch);\r\n          }\r\n        }}\r\n      >\r\n        <SelectTrigger className=\"w-[200px] h-9 border-muted-foreground/20\" data-testid=\"branch-selector\">\r\n          <SelectValue placeholder=\"Select branch\">\r\n            {selectedBranch ? (\r\n              <div className=\"flex items-center gap-2\">\r\n                <span className=\"font-medium\">{selectedBranch.name}</span>\r\n                {selectedBranch.code && (\r\n                  <span className=\"text-xs text-muted-foreground\">({selectedBranch.code})</span>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <span className=\"font-medium\">All Branches</span>\r\n            )}\r\n          </SelectValue>\r\n        </SelectTrigger>\r\n        <SelectContent>\r\n          <SelectItem value=\"all\">\r\n            <div className=\"flex items-center justify-between w-full gap-2\">\r\n              <span className=\"font-medium\">All Branches</span>\r\n              {!selectedBranch && <Check className=\"h-4 w-4\" />}\r\n            </div>\r\n          </SelectItem>\r\n          {branches.map((branch) => (\r\n            <SelectItem key={branch.id} value={branch.id}>\r\n              <div className=\"flex items-center justify-between w-full gap-2\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"font-medium\">{branch.name}</span>\r\n                  {branch.code && (\r\n                    <span className=\"text-xs text-muted-foreground\">({branch.code})</span>\r\n                  )}\r\n                </div>\r\n                {selectedBranch?.id === branch.id && <Check className=\"h-4 w-4\" />}\r\n              </div>\r\n            </SelectItem>\r\n          ))}\r\n        </SelectContent>\r\n      </Select>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AACA;AAOA;AACA;AAXA;;;;;;AAaO,SAAS;IACd,MAAM,EAAE,QAAQ,EAAE,cAAc,EAAE,iBAAiB,EAAE,SAAS,EAAE,eAAe,EAAE,GAAG,IAAA,sKAAS;IAE7F,IAAI,WAAW;QACb,qBACE,iRAAC;YAAI,WAAU;;8BACb,iRAAC,gQAAS;oBAAC,WAAU;;;;;;8BACrB,iRAAC,4KAAQ;oBAAC,WAAU;;;;;;;;;;;;IAG1B;IAEA,IAAI,CAAC,YAAY,SAAS,MAAM,KAAK,GAAG;QACtC,qBACE,iRAAC;YAAI,WAAU;;8BACb,iRAAC,gQAAS;oBAAC,WAAU;;;;;;8BACrB,iRAAC;8BAAK;;;;;;;;;;;;IAGZ;IAEA,uEAAuE;IACvE,IAAI,oBAAoB,OAAO;QAC7B,qBACE,iRAAC;YAAI,WAAU;;8BACb,iRAAC,gQAAS;oBAAC,WAAU;;;;;;8BACrB,iRAAC;oBAAK,WAAU;8BAAe,gBAAgB,QAAQ;;;;;;gBACtD,gBAAgB,sBACf,iRAAC;oBAAK,WAAU;;wBAAgC;wBAAE,eAAe,IAAI;wBAAC;;;;;;;8BAExE,iRAAC,6OAAI;oBAAC,WAAU;;;;;;;;;;;;IAGtB;IAEA,qBACE,iRAAC;QAAI,WAAU;;0BACb,iRAAC,gQAAS;gBAAC,WAAU;;;;;;0BACrB,iRAAC,wKAAM;gBACL,OAAO,gBAAgB,MAAM;gBAC7B,eAAe,CAAC;oBACd,IAAI,UAAU,OAAO;wBACnB,kBAAkB;oBACpB,OAAO;wBACL,MAAM,SAAS,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;wBAC7C,IAAI,QAAQ,kBAAkB;oBAChC;gBACF;;kCAEA,iRAAC,+KAAa;wBAAC,WAAU;wBAA2C,eAAY;kCAC9E,cAAA,iRAAC,6KAAW;4BAAC,aAAY;sCACtB,+BACC,iRAAC;gCAAI,WAAU;;kDACb,iRAAC;wCAAK,WAAU;kDAAe,eAAe,IAAI;;;;;;oCACjD,eAAe,IAAI,kBAClB,iRAAC;wCAAK,WAAU;;4CAAgC;4CAAE,eAAe,IAAI;4CAAC;;;;;;;;;;;;qDAI1E,iRAAC;gCAAK,WAAU;0CAAc;;;;;;;;;;;;;;;;kCAIpC,iRAAC,+KAAa;;0CACZ,iRAAC,4KAAU;gCAAC,OAAM;0CAChB,cAAA,iRAAC;oCAAI,WAAU;;sDACb,iRAAC;4CAAK,WAAU;sDAAc;;;;;;wCAC7B,CAAC,gCAAkB,iRAAC,gPAAK;4CAAC,WAAU;;;;;;;;;;;;;;;;;4BAGxC,SAAS,GAAG,CAAC,CAAC,uBACb,iRAAC,4KAAU;oCAAiB,OAAO,OAAO,EAAE;8CAC1C,cAAA,iRAAC;wCAAI,WAAU;;0DACb,iRAAC;gDAAI,WAAU;;kEACb,iRAAC;wDAAK,WAAU;kEAAe,OAAO,IAAI;;;;;;oDACzC,OAAO,IAAI,kBACV,iRAAC;wDAAK,WAAU;;4DAAgC;4DAAE,OAAO,IAAI;4DAAC;;;;;;;;;;;;;4CAGjE,gBAAgB,OAAO,OAAO,EAAE,kBAAI,iRAAC,gPAAK;gDAAC,WAAU;;;;;;;;;;;;mCARzC,OAAO,EAAE;;;;;;;;;;;;;;;;;;;;;;;AAgBtC"}},
    {"offset": {"line": 1300, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HI/Documents/GitHub/buenasv2/components/ui/popover.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Popover = PopoverPrimitive.Root\r\n\r\nconst PopoverTrigger = PopoverPrimitive.Trigger\r\n\r\nconst PopoverAnchor = PopoverPrimitive.Anchor\r\n\r\nconst PopoverContent = React.forwardRef<\r\n  React.ElementRef<typeof PopoverPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\r\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\r\n  <PopoverPrimitive.Portal>\r\n    <PopoverPrimitive.Content\r\n      ref={ref}\r\n      align={align}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </PopoverPrimitive.Portal>\r\n))\r\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\r\n\r\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,UAAU,8MAAqB;AAErC,MAAM,iBAAiB,iNAAwB;AAE/C,MAAM,gBAAgB,gNAAuB;AAE7C,MAAM,+BAAiB,sPAAgB,CAGrC,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC5D,iRAAC,gNAAuB;kBACtB,cAAA,iRAAC,iNAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,qJAAE,EACX,geACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,iNAAwB,CAAC,WAAW"}},
    {"offset": {"line": 1345, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HI/Documents/GitHub/buenasv2/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst ScrollArea = React.forwardRef<\r\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\r\n>(({ className, children, ...props }, ref) => (\r\n  <ScrollAreaPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\"relative overflow-hidden\", className)}\r\n    {...props}\r\n  >\r\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\r\n      {children}\r\n    </ScrollAreaPrimitive.Viewport>\r\n    <ScrollBar />\r\n    <ScrollAreaPrimitive.Corner />\r\n  </ScrollAreaPrimitive.Root>\r\n))\r\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\r\n\r\nconst ScrollBar = React.forwardRef<\r\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\r\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\r\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\r\n    ref={ref}\r\n    orientation={orientation}\r\n    className={cn(\r\n      \"flex touch-none select-none transition-colors\",\r\n      orientation === \"vertical\" &&\r\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\r\n      orientation === \"horizontal\" &&\r\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\r\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n))\r\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\r\n\r\nexport { ScrollArea, ScrollBar }\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,2BAAa,sPAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,iRAAC,qNAAwB;QACvB,KAAK;QACL,WAAW,IAAA,qJAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;0BAET,iRAAC,yNAA4B;gBAAC,WAAU;0BACrC;;;;;;0BAEH,iRAAC;;;;;0BACD,iRAAC,uNAA0B;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,qNAAwB,CAAC,WAAW;AAE7D,MAAM,0BAAY,sPAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO,EAAE,oBACpD,iRAAC,oOAAuC;QACtC,KAAK;QACL,aAAa;QACb,WAAW,IAAA,qJAAE,EACX,iDACA,gBAAgB,cACd,sDACF,gBAAgB,gBACd,wDACF;QAED,GAAG,KAAK;kBAET,cAAA,iRAAC,gOAAmC;YAAC,WAAU;;;;;;;;;;;AAGnD,UAAU,WAAW,GAAG,oOAAuC,CAAC,WAAW"}},
    {"offset": {"line": 1413, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HI/Documents/GitHub/buenasv2/components/layout/notification-bell.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Bell } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n    Popover,\r\n    PopoverContent,\r\n    PopoverTrigger,\r\n} from '@/components/ui/popover';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { formatDistanceToNow } from 'date-fns';\r\nimport { useRouter } from 'next/navigation';\r\n\r\ntype Notification = {\r\n    id: string;\r\n    type: string;\r\n    title: string;\r\n    message: string;\r\n    link?: string;\r\n    isRead: boolean;\r\n    createdAt: string;\r\n};\r\n\r\nexport function NotificationBell() {\r\n    const [notifications, setNotifications] = useState<Notification[]>([]);\r\n    const [unreadCount, setUnreadCount] = useState(0);\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const router = useRouter();\r\n\r\n    const fetchNotifications = async () => {\r\n        try {\r\n            const res = await fetch('/api/notifications');\r\n            const data = await res.json();\r\n            if (data.success) {\r\n                setNotifications(data.data.notifications);\r\n                setUnreadCount(data.data.unreadCount);\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to fetch notifications');\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchNotifications();\r\n        // Poll every 30 seconds\r\n        const interval = setInterval(fetchNotifications, 30000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    const handleMarkAsRead = async (id: string, link?: string) => {\r\n        try {\r\n            if (link) {\r\n                setIsOpen(false);\r\n                router.push(link);\r\n            }\r\n\r\n            // Optimistic update\r\n            setNotifications(prev => prev.map(n => n.id === id ? { ...n, isRead: true } : n));\r\n            setUnreadCount(prev => Math.max(0, prev - 1));\r\n\r\n            await fetch('/api/notifications', {\r\n                method: 'PATCH',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ id }),\r\n            });\r\n\r\n            // Refresh to be sure\r\n            fetchNotifications();\r\n        } catch (error) {\r\n            console.error('Failed to mark as read');\r\n        }\r\n    };\r\n\r\n    const markAllRead = async () => {\r\n        try {\r\n            setNotifications(prev => prev.map(n => ({ ...n, isRead: true })));\r\n            setUnreadCount(0);\r\n\r\n            await fetch('/api/notifications', {\r\n                method: 'PATCH',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ markAll: true }),\r\n            });\r\n        } catch (error) { console.error(error); }\r\n    };\r\n\r\n    return (\r\n        <Popover open={isOpen} onOpenChange={setIsOpen}>\r\n            <PopoverTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"relative\">\r\n                    <Bell className=\"h-5 w-5\" />\r\n                    {unreadCount > 0 && (\r\n                        <span className=\"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] text-white\">\r\n                            {unreadCount > 9 ? '9+' : unreadCount}\r\n                        </span>\r\n                    )}\r\n                </Button>\r\n            </PopoverTrigger>\r\n            <PopoverContent className=\"w-80 p-0\" align=\"end\">\r\n                <div className=\"flex items-center justify-between border-b p-4\">\r\n                    <h4 className=\"font-semibold\">Notifications</h4>\r\n                    {unreadCount > 0 && (\r\n                        <Button variant=\"ghost\" size=\"sm\" className=\"text-xs\" onClick={markAllRead}>\r\n                            Mark all as read\r\n                        </Button>\r\n                    )}\r\n                </div>\r\n                <ScrollArea className=\"h-[300px]\">\r\n                    {notifications.length === 0 ? (\r\n                        <div className=\"p-4 text-center text-sm text-muted-foreground\">\r\n                            No notifications\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"grid gap-1\">\r\n                            {notifications.map((notification) => (\r\n                                <div\r\n                                    key={notification.id}\r\n                                    className={`flex flex-col gap-1 p-4 hover:bg-muted/50 cursor-pointer ${!notification.isRead ? 'bg-muted/20' : ''\r\n                                        }`}\r\n                                    onClick={() => handleMarkAsRead(notification.id, notification.link)}\r\n                                >\r\n                                    <div className=\"flex items-start justify-between gap-2\">\r\n                                        <span className=\"text-sm font-medium leading-none\">\r\n                                            {notification.title}\r\n                                            {!notification.isRead && (\r\n                                                <span className=\"ml-2 inline-block h-2 w-2 rounded-full bg-blue-500\" />\r\n                                            )}\r\n                                        </span>\r\n                                        <span className=\"text-xs text-muted-foreground whitespace-nowrap\">\r\n                                            {formatDistanceToNow(new Date(notification.createdAt), { addSuffix: true })}\r\n                                        </span>\r\n                                    </div>\r\n                                    <p className=\"text-xs text-muted-foreground line-clamp-2\">\r\n                                        {notification.message}\r\n                                    </p>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </ScrollArea>\r\n            </PopoverContent>\r\n        </Popover>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1665, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HI/Documents/GitHub/buenasv2/app/%28dashboard%29/dashboard-layout-client.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useAuth } from '@/contexts/auth.context';\r\nimport { useBranchContext } from '@/contexts/branch-context';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport { useEffect, ReactNode } from 'react';\r\nimport { Loader2 } from 'lucide-react';\r\nimport { Sidebar } from '@/components/shared/sidebar';\r\nimport { BranchSelector } from '@/components/shared/branch-selector';\r\nimport { NotificationBell } from '@/components/layout/notification-bell';\r\n\r\n\r\nexport function DashboardLayoutClient({ children, counts }: { children: ReactNode, counts?: Record<string, number> }) {\r\n    const { isAuthenticated, isLoading } = useAuth();\r\n    const router = useRouter();\r\n    const pathname = usePathname();\r\n\r\n    useEffect(() => {\r\n        console.log('DashboardLayout Effect:', { isLoading, isAuthenticated, pathname });\r\n        if (!isLoading && !isAuthenticated) {\r\n            const url = new URL('/login', window.location.href);\r\n            url.searchParams.set('redirect', pathname);\r\n            console.log('Redirecting to:', url.toString());\r\n            router.push(url.pathname + url.search);\r\n        }\r\n    }, [isLoading, isAuthenticated, router, pathname]);\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-background\">\r\n                <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!isAuthenticated) {\r\n        return null; // Will redirect in useEffect\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-background\">\r\n            <Sidebar counts={counts} />\r\n            <div className=\"lg:pl-64\">\r\n                <div className=\"sticky top-0 z-40 flex h-16 shrink-0 items-center justify-between gap-x-4 border-b border-border bg-background px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8\">\r\n                    <BranchSelector />\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <span className=\"text-sm text-muted-foreground mr-4 hidden sm:block\">\r\n                            Support: 0981-125-4446 & 0915-891-8530\r\n                        </span>\r\n                        <NotificationBell />\r\n                        {/* Add UserNav or other right-side items here later */}\r\n                    </div>\r\n                </div>\r\n                <main className=\"py-10\">\r\n                    <div className=\"px-4 sm:px-6 lg:px-8\">\r\n                        {children}\r\n                    </div>\r\n                </main>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AATA;;;;;;;;;AAYO,SAAS,sBAAsB,EAAE,QAAQ,EAAE,MAAM,EAA4D;IAChH,MAAM,EAAE,eAAe,EAAE,SAAS,EAAE,GAAG,IAAA,0KAAO;IAC9C,MAAM,SAAS,IAAA,kLAAS;IACxB,MAAM,WAAW,IAAA,oLAAW;IAE5B,IAAA,qPAAS,EAAC;QACN,QAAQ,GAAG,CAAC,2BAA2B;YAAE;YAAW;YAAiB;QAAS;QAC9E,IAAI,CAAC,aAAa,CAAC,iBAAiB;YAChC,MAAM,MAAM,IAAI,IAAI,UAAU,OAAO,QAAQ,CAAC,IAAI;YAClD,IAAI,YAAY,CAAC,GAAG,CAAC,YAAY;YACjC,QAAQ,GAAG,CAAC,mBAAmB,IAAI,QAAQ;YAC3C,OAAO,IAAI,CAAC,IAAI,QAAQ,GAAG,IAAI,MAAM;QACzC;IACJ,GAAG;QAAC;QAAW;QAAiB;QAAQ;KAAS;IAEjD,IAAI,WAAW;QACX,qBACI,iRAAC;YAAI,WAAU;sBACX,cAAA,iRAAC,+PAAO;gBAAC,WAAU;;;;;;;;;;;IAG/B;IAEA,IAAI,CAAC,iBAAiB;QAClB,OAAO,MAAM,6BAA6B;IAC9C;IAEA,qBACI,iRAAC;QAAI,WAAU;;0BACX,iRAAC,8KAAO;gBAAC,QAAQ;;;;;;0BACjB,iRAAC;gBAAI,WAAU;;kCACX,iRAAC;wBAAI,WAAU;;0CACX,iRAAC,gMAAc;;;;;0CACf,iRAAC;gCAAI,WAAU;;kDACX,iRAAC;wCAAK,WAAU;kDAAqD;;;;;;kDAGrE,iRAAC,oMAAgB;;;;;;;;;;;;;;;;;kCAIzB,iRAAC;wBAAK,WAAU;kCACZ,cAAA,iRAAC;4BAAI,WAAU;sCACV;;;;;;;;;;;;;;;;;;;;;;;AAMzB"}}]
}